<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLOps Testing - Piattaforma di Studio Interattiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #0a0a0a;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255,255,255,0.05) 10px,
                rgba(255,255,255,0.05) 20px
            );
            animation: slide 20s linear infinite;
        }

        @keyframes slide {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .header h1 {
            position: relative;
            z-index: 1;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            position: relative;
            z-index: 1;
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Navigation */
        .nav-container {
            background: #1a1a1a;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .nav-tabs {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .nav-tab {
            background: #2a2a2a;
            color: #fff;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .nav-tab:hover::before {
            width: 100%;
            height: 100%;
        }

        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: scale(1.05);
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: flex;
            gap: 2rem;
            min-height: calc(100vh - 200px);
        }

        /* Content Area */
        .content-area {
            flex: 1;
            background: #1a1a1a;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow-y: auto;
            max-height: 80vh;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Study Cards */
        .study-card {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #3a3a3a;
            transition: all 0.3s ease;
            color: #fff;
        }

        .study-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .study-card h3 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .study-card ul {
            list-style: none;
            padding-left: 0;
        }

        .study-card li {
            margin-bottom: 0.75rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .study-card li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #4ade80;
            font-weight: bold;
        }

        /* Interactive Elements */
        .quiz-container {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #3a3a3a;
        }

        .quiz-question {
            color: #fff;
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .quiz-option {
            background: #3a3a3a;
            border: 2px solid #4a4a4a;
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #fff;
        }

        .quiz-option:hover {
            background: #4a4a4a;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: #22c55e;
            border-color: #16a34a;
        }

        .quiz-option.incorrect {
            background: #ef4444;
            border-color: #dc2626;
        }

        /* Progress Tracker */
        .progress-container {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #3a3a3a;
        }

        .progress-bar {
            background: #3a3a3a;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Chatbot */
        .chatbot-container {
            width: 400px;
            background: #1a1a1a;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            height: 80vh;
            position: sticky;
            top: 100px;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px 12px 0 0;
            text-align: center;
            font-weight: bold;
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 1rem;
            border-radius: 12px;
            animation: messageSlide 0.3s ease;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            background: #667eea;
            color: white;
            align-self: flex-end;
            margin-left: auto;
        }

        .message.bot {
            background: #2a2a2a;
            color: #fff;
            border: 1px solid #3a3a3a;
            align-self: flex-start;
        }

        .chatbot-input {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid #3a3a3a;
        }

        .chatbot-input input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #3a3a3a;
            border-radius: 8px;
            background: #2a2a2a;
            color: #fff;
            font-size: 1rem;
        }

        .chatbot-input button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .chatbot-input button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        /* Code Examples */
        .code-block {
            background: #0a0a0a;
            border: 1px solid #3a3a3a;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            overflow-x: auto;
            position: relative;
        }

        .code-block pre {
            color: #e5e5e5;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .code-lang {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: #667eea;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* Interactive Features */
        .feature-card {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #3a3a3a;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .feature-card:hover::before {
            left: 100%;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }
            
            .chatbot-container {
                width: 100%;
                height: 500px;
                position: relative;
                top: 0;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #3a3a3a;
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>🚀 MLOps Testing - Piattaforma di Studio Interattiva</h1>
        <p>Diventa un esperto di Testing in MLOps con contenuti interattivi e supporto AI</p>
    </header>

    <nav class="nav-container">
        <div class="nav-tabs">
            <button class="nav-tab active" data-section="overview">📚 Panoramica</button>
            <button class="nav-tab" data-section="concepts">🧠 Concetti Chiave</button>
            <button class="nav-tab" data-section="testing-types">🔍 Tipologie di Test</button>
            <button class="nav-tab" data-section="cicd">⚙️ CI/CD Pipeline</button>
            <button class="nav-tab" data-section="monitoring">📊 Monitoraggio</button>
            <button class="nav-tab" data-section="practice">💻 Pratica</button>
            <button class="nav-tab" data-section="quiz">🎯 Quiz</button>
            <button class="nav-tab" data-section="resources">📖 Risorse</button>
        </div>
    </nav>

    <div class="main-container">
        <div class="content-area">
            <!-- Overview Section -->
            <section id="overview" class="content-section active">
                <div class="progress-container">
                    <h3 style="color: #fff;">Il tuo progresso di apprendimento</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar"></div>
                    </div>
                    <p style="color: #aaa; margin-top: 0.5rem;">Completa le sezioni per aumentare il tuo progresso</p>
                </div>

                <div class="study-card">
                    <h3>🎯 Obiettivi di Apprendimento</h3>
                    <ul>
                        <li>Comprendere l'importanza del testing in MLOps</li>
                        <li>Padroneggiare le diverse tipologie di test (dati, modello, sistema)</li>
                        <li>Implementare pipeline CI/CD per progetti ML</li>
                        <li>Configurare sistemi di monitoraggio efficaci</li>
                        <li>Applicare best practices di sicurezza in MLOps</li>
                        <li>Costruire un framework di testing completo</li>
                    </ul>
                </div>

                <div class="study-card">
                    <h3>🚨 Perché il Testing è Cruciale in MLOps?</h3>
                    <p style="color: #ddd; margin-bottom: 1rem;">I sistemi ML presentano sfide uniche che richiedono un approccio sistematico al testing:</p>
                    
                    <div class="feature-card">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">📉 Data Drift</h4>
                        <p style="color: #bbb;">I dati cambiano nel tempo, rendendo il modello meno accurato. Il testing continuo rileva questi cambiamenti prima che causino problemi.</p>
                    </div>

                    <div class="feature-card">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">🔄 Model Decay</h4>
                        <p style="color: #bbb;">Le performance del modello degradano naturalmente. Senza test automatici, questi problemi passano inosservati.</p>
                    </div>

                    <div class="feature-card">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">🤫 Silent Failures</h4>
                        <p style="color: #bbb;">Errori che non generano eccezioni ma producono output sbagliati. Solo test end-to-end possono rilevarli.</p>
                    </div>

                    <div class="feature-card">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">⚖️ Bias Amplification</h4>
                        <p style="color: #bbb;">I modelli possono amplificare bias presenti nei dati. Test di fairness sono essenziali per decisioni etiche.</p>
                    </div>
                </div>
            </section>

            <!-- Concepts Section -->
            <section id="concepts" class="content-section">
                <div class="study-card">
                    <h3>🧩 Concetti Fondamentali del Testing MLOps</h3>
                    
                    <h4 style="color: #667eea; margin-top: 1.5rem;">1. Testing Olistico</h4>
                    <p style="color: #ddd; margin-bottom: 1rem;">Il testing in MLOps copre tre aree principali:</p>
                    <ul>
                        <li><strong style="color: #4ade80;">Data Testing:</strong> Validazione qualità, coerenza e integrità dei dati</li>
                        <li><strong style="color: #4ade80;">Model Testing:</strong> Verifica performance, robustezza e fairness del modello</li>
                        <li><strong style="color: #4ade80;">System Testing:</strong> Test infrastruttura, integrazione e performance sistema</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 1.5rem;">2. Automazione Continua</h4>
                    <p style="color: #ddd;">L'automazione è fondamentale per:</p>
                    <ul>
                        <li>Ridurre errori umani</li>
                        <li>Garantire consistenza nei test</li>
                        <li>Velocizzare il ciclo di sviluppo</li>
                        <li>Rilevare problemi tempestivamente</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 1.5rem;">3. Monitoraggio in Produzione</h4>
                    <p style="color: #ddd;">Il testing non finisce con il deployment:</p>
                    <ul>
                        <li>Monitoraggio continuo delle metriche</li>
                        <li>Alert automatici su anomalie</li>
                        <li>Feedback loop per miglioramenti</li>
                        <li>Trigger automatici per retraining</li>
                    </ul>
                </div>

                <div class="code-block">
                    <span class="code-lang">Python</span>
                    <pre>
# Esempio: Test automatico sulla qualità dei dati
import great_expectations as ge

def test_data_quality(df):
    """Verifica la qualità dei dati di input"""
    
    # Crea aspettative sui dati
    expect_suite = ge.dataset.PandasDataset(df)
    
    # Test su colonne richieste
    expect_suite.expect_column_to_exist("age")
    expect_suite.expect_column_to_exist("income")
    
    # Test su range valori
    expect_suite.expect_column_values_to_be_between(
        "age", min_value=0, max_value=120
    )
    
    # Test su valori nulli
    expect_suite.expect_column_values_to_not_be_null("user_id")
    
    # Test su distribuzione
    expect_suite.expect_column_mean_to_be_between(
        "income", min_value=20000, max_value=100000
    )
    
    return expect_suite.validate()
                    </pre>
                </div>
            </section>

            <!-- Testing Types Section -->
            <section id="testing-types" class="content-section">
                <div class="study-card">
                    <h3>🔍 Tipologie di Test in MLOps</h3>
                    
                    <h4 style="color: #667eea; margin-top: 1.5rem;">📊 Data Testing</h4>
                    <p style="color: #ddd; margin-bottom: 1rem;">Validazione completa dei dati attraverso il pipeline:</p>
                    
                    <div class="feature-card">
                        <h5 style="color: #4ade80;">Schema Validation</h5>
                        <ul style="color: #bbb;">
                            <li>Verifica presenza di tutte le colonne richieste</li>
                            <li>Controllo tipi di dati corretti</li>
                            <li>Validazione formati (date, email, etc.)</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h5 style="color: #4ade80;">Statistical Tests</h5>
                        <ul style="color: #bbb;">
                            <li>Test distribuzione valori (range, media, deviazione)</li>
                            <li>Rilevamento outlier e anomalie</li>
                            <li>Verifica completezza dati (% valori nulli)</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h5 style="color: #4ade80;">Drift Detection</h5>
                        <ul style="color: #bbb;">
                            <li>Confronto distribuzioni con dati di training</li>
                            <li>Monitoraggio feature drift nel tempo</li>
                            <li>Alert su cambiamenti significativi</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- CI/CD Section -->
            <section id="cicd" class="content-section">
                <div class="study-card">
                    <h3>⚙️ CI/CD per Machine Learning</h3>
                    
                    <h4 style="color: #667eea;">Pipeline CI/CD MLOps</h4>
                    <p style="color: #ddd; margin-bottom: 1rem;">Una pipeline CI/CD per ML include step specifici per dati e modelli:</p>
                    
                    <div class="code-block">
                        <span class="code-lang">YAML</span>
                        <pre>
# .github/workflows/mlops-pipeline.yml
name: MLOps CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  data-validation:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      
      - name: Validate Data Quality
        run: |
          python scripts/validate_data.py
      
      - name: Check for Data Drift
        run: |
          python scripts/detect_drift.py
  
  model-training:
    needs: data-validation
    runs-on: ubuntu-latest
    steps:
      - name: Train Model
        run: |
          python scripts/train_model.py
      
      - name: Evaluate Model
        run: |
          python scripts/evaluate_model.py
                        </pre>
                    </div>
                </div>
            </section>

            <!-- Monitoring Section -->
            <section id="monitoring" class="content-section">
                <div class="study-card">
                    <h3>📊 Monitoraggio dei Sistemi ML</h3>
                    
                    <h4 style="color: #667eea;">Dashboard di Monitoraggio</h4>
                    <p style="color: #ddd; margin-bottom: 1rem;">Metriche chiave da monitorare in produzione:</p>
                    
                    <div class="feature-card">
                        <h5 style="color: #4ade80;">📈 Metriche di Performance</h5>
                        <ul style="color: #bbb;">
                            <li><strong>Accuracy:</strong> Monitorare degradazione nel tempo</li>
                            <li><strong>Latenza:</strong> Tempo risposta API (target < 100ms)</li>
                            <li><strong>Throughput:</strong> Richieste al secondo gestite</li>
                            <li><strong>Error Rate:</strong> % richieste fallite</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Practice Section -->
            <section id="practice" class="content-section">
                <div class="study-card">
                    <h3>💻 Esercizi Pratici</h3>
                    
                    <h4 style="color: #667eea;">Esercizio 1: Implementa Data Validation</h4>
                    <p style="color: #ddd;">Crea una suite di test per validare un dataset di e-commerce.</p>
                </div>
            </section>

            <!-- Quiz Section -->
            <section id="quiz" class="content-section">
                <div class="study-card">
                    <h3>🎯 Quiz Interattivo</h3>
                    <p style="color: #ddd; margin-bottom: 2rem;">Testa le tue conoscenze su MLOps Testing!</p>
                </div>

                <div class="quiz-container" id="quizContainer">
                    <!-- Quiz will be loaded here -->
                </div>

                <div class="study-card" style="margin-top: 2rem;">
                    <h3>📊 Risultati Quiz</h3>
                    <div id="quizResults" style="display: none;">
                        <p style="color: #ddd; font-size: 1.2rem;">
                            Punteggio: <span id="quizScore" style="color: #4ade80; font-weight: bold;"></span>
                        </p>
                        <p style="color: #bbb; margin-top: 1rem;" id="quizFeedback"></p>
                    </div>
                </div>
            </section>

            <!-- Resources Section -->
            <section id="resources" class="content-section">
                <div class="study-card">
                    <h3>📚 Risorse di Approfondimento</h3>
                    
                    <h4 style="color: #667eea;">📖 Documentazione Essenziale</h4>
                    <ul>
                        <li>Great Expectations - Testing e validazione dati</li>
                        <li>MLflow - Tracking esperimenti e modelli</li>
                        <li>Evidently AI - Monitoring ML in produzione</li>
                        <li>pytest - Testing framework per Python</li>
                    </ul>
                </div>
            </section>
        </div>

        <!-- Chatbot Container -->
        <div class="chatbot-container">
            <div class="chatbot-header">
                🤖 MLOps Testing Assistant
            </div>
            <div class="chatbot-messages" id="chatMessages">
                <div class="message bot">
                    Ciao! Sono il tuo assistente AI personale. Posso aiutarti con:
                    <br><br>
                    🤖 <strong>AI & Machine Learning</strong>: algoritmi, deep learning, MLOps
                    <br>💻 <strong>Programmazione</strong>: Python, JavaScript, web development
                    <br>📊 <strong>Data Science</strong>: statistiche, analisi dati, visualizzazione
                    <br>🏢 <strong>Business</strong>: project management, digital transformation
                    <br>🔬 <strong>Scienza</strong>: matematica, fisica, metodologie di ricerca
                    <br>🎨 <strong>Creatività</strong>: problem solving, innovazione, design thinking
                    <br><br>
                    Cosa vorresti approfondire? Puoi farmi qualsiasi domanda!
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatInput" placeholder="Fai una domanda...">
                <button id="clearBtn" title="Pulisci chat" style="background: #dc2626; margin-right: 0.5rem; padding: 0.75rem;">🗑️</button>
                <button id="sendBtn">Invia</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentSection = 'overview';
        let visitedSections = new Set(['overview']);
        let currentQuestion = 0;
        let score = 0;

        // Quiz questions data
        const quizQuestions = [
            {
                question: "Qual è la principale differenza tra il testing tradizionale e il testing MLOps?",
                options: [
                    "MLOps testing si concentra solo sul codice",
                    "MLOps testing include validazione di dati, modelli e sistemi",
                    "MLOps testing è più semplice",
                    "Non ci sono differenze significative"
                ],
                correct: 1,
                explanation: "MLOps testing è più complesso perché deve validare non solo il codice, ma anche la qualità dei dati, le performance dei modelli e l'integrità del sistema end-to-end."
            },
            {
                question: "Cosa significa 'Data Drift' in MLOps?",
                options: [
                    "Perdita di dati dal database",
                    "Cambiamento nella distribuzione dei dati nel tempo",
                    "Errore nella pipeline di dati",
                    "Duplicazione dei dati"
                ],
                correct: 1,
                explanation: "Data Drift si riferisce al cambiamento nella distribuzione statistica dei dati di input rispetto ai dati di training, che può degradare le performance del modello."
            },
            {
                question: "Quale strumento è specificamente progettato per la validazione dei dati in ML?",
                options: [
                    "pytest",
                    "Jest",
                    "Great Expectations",
                    "Selenium"
                ],
                correct: 2,
                explanation: "Great Expectations è uno strumento specificamente progettato per la validazione e il testing della qualità dei dati in progetti di machine learning."
            },
            {
                question: "In una pipeline CI/CD per ML, quale step dovrebbe essere eseguito per primo?",
                options: [
                    "Model training",
                    "Deployment",
                    "Data validation",
                    "Model evaluation"
                ],
                correct: 2,
                explanation: "Data validation dovrebbe essere il primo step per assicurarsi che i dati siano corretti prima di procedere con training e deployment."
            },
            {
                question: "Qual è una metrica importante da monitorare in produzione per un modello ML?",
                options: [
                    "Solo la CPU usage",
                    "Solo la memoria",
                    "Accuracy degradation nel tempo",
                    "Solo il network traffic"
                ],
                correct: 2,
                explanation: "Il monitoraggio dell'accuracy nel tempo è cruciale per rilevare il model decay e decidere quando è necessario un retraining."
            }
        ];

        // Navigation functions
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            document.getElementById(sectionId).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
            
            // Update current section
            currentSection = sectionId;
            visitedSections.add(sectionId);
            
            // Update progress
            updateProgress();
            
            // Load quiz if quiz section
            if (sectionId === 'quiz') {
                loadQuiz();
            }
        }

        function updateProgress() {
            const totalSections = 8; // Total number of sections
            const progressPercentage = (visitedSections.size / totalSections) * 100;
            document.getElementById('progressBar').style.width = progressPercentage + '%';
        }

        // Enhanced AI Assistant with comprehensive knowledge base
        const comprehensiveKnowledge = {
            // MLOps and AI/ML Topics
            mlops: {
                "data drift": {
                    definition: "cambiamento nella distribuzione dei dati nel tempo",
                    causes: ["evoluzione del comportamento utenti", "cambiamenti stagionali", "modifiche al sistema di raccolta dati"],
                    detection: ["test statistici (KS, Chi-square)", "monitoraggio distribuzioni", "confronto con baseline"],
                    solutions: ["retraining periodico", "alert automatici", "data validation continua"]
                },
                "model decay": {
                    definition: "degradazione delle performance del modello nel tempo",
                    symptoms: ["calo accuracy", "aumento false positive", "predizioni sbilanciate"],
                    monitoring: ["tracking metriche in real-time", "confronto con soglie", "analisi trend"],
                    mitigation: ["retraining automatico", "ensemble models", "continuous learning"]
                },
                "ci/cd": {
                    definition: "automazione del processo di integrazione e deployment",
                    components: ["data validation", "model training", "testing", "deployment", "monitoring"],
                    tools: ["GitHub Actions", "GitLab CI", "Jenkins", "Kubeflow"],
                    benefits: ["rilasci più rapidi", "meno errori", "rollback veloci"]
                },
                "testing": {
                    types: ["unit test", "integration test", "data quality test", "model performance test"],
                    frameworks: ["pytest", "unittest", "Great Expectations"],
                    best_practices: ["automatizzare tutto", "test in ogni fase", "documentare risultati"]
                },
                "monitoring": {
                    metrics: ["accuracy", "latency", "throughput", "error rate", "data quality"],
                    tools: ["Prometheus", "Grafana", "Evidently AI", "WhyLabs"],
                    alerts: ["degradazione performance", "data drift", "system failures"]
                },
                "machine learning": {
                    definition: "campo dell'intelligenza artificiale che si concentra sulla creazione di algoritmi che apprendono dai dati",
                    types: ["supervised learning", "unsupervised learning", "reinforcement learning"],
                    algorithms: ["linear regression", "decision trees", "neural networks", "SVM", "clustering"],
                    applications: ["computer vision", "natural language processing", "recommendation systems", "predictive analytics"]
                },
                "deep learning": {
                    definition: "sottocampo del machine learning che utilizza reti neurali profonde",
                    architectures: ["CNN", "RNN", "LSTM", "Transformer", "GAN"],
                    frameworks: ["TensorFlow", "PyTorch", "Keras", "JAX"],
                    applications: ["riconoscimento immagini", "traduzione automatica", "generazione testi", "sintesi vocale"]
                }
            },
            
            // Programming and Technology
            programming: {
                "python": {
                    definition: "linguaggio di programmazione ad alto livello, interpretato e orientato agli oggetti",
                    features: ["sintassi semplice", "tipizzazione dinamica", "librerie extensive", "multiparadigma"],
                    uses: ["web development", "data science", "AI/ML", "automation", "scripting"],
                    libraries: ["pandas", "numpy", "scikit-learn", "flask", "django"]
                },
                "javascript": {
                    definition: "linguaggio di programmazione interpretato, principalmente usato per lo sviluppo web",
                    features: ["dinamico", "event-driven", "prototipale", "first-class functions"],
                    uses: ["frontend web", "backend (Node.js)", "mobile apps", "desktop apps"],
                    frameworks: ["React", "Vue.js", "Angular", "Node.js", "Express"]
                },
                "web development": {
                    definition: "processo di creazione di applicazioni web",
                    frontend: ["HTML", "CSS", "JavaScript", "React", "Vue", "Angular"],
                    backend: ["Node.js", "Python", "Java", "C#", "PHP", "Ruby"],
                    databases: ["MySQL", "PostgreSQL", "MongoDB", "Redis"],
                    tools: ["Git", "Docker", "Kubernetes", "CI/CD pipelines"]
                },
                "database": {
                    definition: "sistema organizzato per memorizzare e gestire dati",
                    types: ["relazionali (SQL)", "NoSQL", "graph databases", "time series"],
                    concepts: ["normalization", "indexing", "transactions", "ACID properties"],
                    popular: ["MySQL", "PostgreSQL", "MongoDB", "Redis", "Cassandra"]
                }
            },
            
            // Science and Mathematics
            science: {
                "statistics": {
                    definition: "branca della matematica che studia la raccolta e l'analisi dei dati",
                    concepts: ["media", "mediana", "deviazione standard", "distribuzione", "correlazione"],
                    tests: ["t-test", "chi-square", "ANOVA", "regression analysis"],
                    applications: ["ricerca scientifica", "business analytics", "qualità controllo"]
                },
                "mathematics": {
                    definition: "scienza che studia numeri, forme, strutture e cambiamenti",
                    branches: ["algebra", "geometria", "calcolo", "statistica", "logica"],
                    concepts: ["funzioni", "derivate", "integrali", "matrici", "vettori"],
                    applications: ["fisica", "ingegneria", "informatica", "economia"]
                },
                "physics": {
                    definition: "scienza che studia la materia, l'energia e le loro interazioni",
                    branches: ["meccanica", "termodinamica", "elettromagnetismo", "ottica", "fisica quantistica"],
                    concepts: ["forza", "energia", "momento", "onde", "particelle"],
                    applications: ["tecnologia", "medicina", "astronomia", "ingegneria"]
                }
            },
            
            // Business and Economics
            business: {
                "digital transformation": {
                    definition: "integrazione di tecnologia digitale in tutte le aree di business",
                    components: ["cloud computing", "AI/ML", "IoT", "big data", "automation"],
                    benefits: ["efficienza operativa", "customer experience", "innovation", "competitive advantage"],
                    challenges: ["change management", "skills gap", "security", "investment costs"]
                },
                "project management": {
                    definition: "disciplina che applica processi e metodologie per raggiungere obiettivi",
                    methodologies: ["Agile", "Scrum", "Waterfall", "Kanban", "Lean"],
                    phases: ["iniziazione", "pianificazione", "esecuzione", "monitoraggio", "chiusura"],
                    tools: ["Jira", "Trello", "Asana", "Microsoft Project", "Slack"]
                }
            },
            
            // General Knowledge
            general: {
                "creativity": {
                    definition: "capacità di generare idee originali e innovative",
                    techniques: ["brainstorming", "mind mapping", "design thinking", "lateral thinking"],
                    domains: ["arte", "scrittura", "problem solving", "innovation", "design"],
                    factors: ["curiosità", "apertura mentale", "esperienza", "conoscenza trasversale"]
                },
                "communication": {
                    definition: "processo di trasmissione e ricezione di informazioni",
                    types: ["verbale", "non verbale", "scritta", "visiva", "digitale"],
                    skills: ["ascolto attivo", "empatia", "chiarezza", "persuasione", "storytelling"],
                    tools: ["presentazioni", "email", "social media", "video calls", "documentation"]
                }
            },
            
            // Code Examples
            examples: {
                "python basics": `# Esempio Python - Analisi dati
import pandas as pd
import numpy as np

# Carica dataset
df = pd.read_csv('data.csv')

# Analisi esplorativa
print(df.describe())
print(df.info())

# Pulizia dati
df_clean = df.dropna()
df_clean['new_column'] = df_clean['col1'] * 2

# Visualizzazione
import matplotlib.pyplot as plt
plt.figure(figsize=(10, 6))
plt.hist(df_clean['column'], bins=30)
plt.title('Distribuzione dei dati')
plt.show()`,
                
                "javascript basics": `// Esempio JavaScript - API REST
const fetchData = async (url) => {
    try {
        const response = await fetch(url);
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Errore:', error);
        return null;
    }
};

// Utilizzo
fetchData('https://api.example.com/data')
    .then(data => {
        console.log('Dati ricevuti:', data);
        // Processa i dati
    });

// Event handling
document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById('myButton');
    button.addEventListener('click', () => {
        alert('Bottone cliccato!');
    });
});`,
                
                "sql basics": `-- Esempio SQL - Query complessa
SELECT 
    u.name,
    u.email,
    COUNT(o.id) as total_orders,
    SUM(o.amount) as total_spent,
    AVG(o.amount) as avg_order_value
FROM users u
LEFT JOIN orders o ON u.id = o.user_id
WHERE u.created_at >= '2023-01-01'
GROUP BY u.id, u.name, u.email
HAVING COUNT(o.id) > 5
ORDER BY total_spent DESC
LIMIT 10;`,
                
                "data validation": `# Esempio con Great Expectations
import great_expectations as ge

df = ge.read_csv("data.csv")
df.expect_column_values_to_be_between("age", 0, 120)
df.expect_column_values_to_not_be_null("user_id")
df.expect_column_mean_to_be_between("score", 0.5, 0.8)`,
                
                "model testing": `# Test delle performance del modello
def test_model_accuracy(model, X_test, y_test):
    predictions = model.predict(X_test)
    accuracy = accuracy_score(y_test, predictions)
    assert accuracy > 0.85, f"Accuracy {accuracy} sotto soglia"
    
def test_model_robustness(model, X_test):
    # Aggiungi rumore
    X_noisy = X_test + np.random.normal(0, 0.1, X_test.shape)
    pred_original = model.predict(X_test)
    pred_noisy = model.predict(X_noisy)
    consistency = np.mean(pred_original == pred_noisy)
    assert consistency > 0.9`
            }
        };

        // Advanced AI Response Generator
        function generateDynamicResponse(message) {
            const lowerMessage = message.toLowerCase();
            const words = lowerMessage.split(' ');
            
            // Enhanced intent analysis
            const intents = {
                question: message.includes('?') || words.some(w => ['come', 'cosa', 'quando', 'dove', 'perché', 'quale', 'quali', 'chi'].includes(w)),
                example: words.some(w => ['esempio', 'esempi', 'codice', 'mostra', 'mostrami', 'demo', 'tutorial'].includes(w)),
                list: words.some(w => ['elenca', 'lista', 'elenco', 'quali sono', 'dimmi', 'tipi', 'tipologie'].includes(w)),
                howTo: words.some(w => ['come fare', 'come si fa', 'come creare', 'come implementare', 'step', 'passaggi'].includes(w)),
                comparison: words.some(w => ['differenza', 'confronto', 'vs', 'meglio', 'peggio', 'confronta'].includes(w)),
                explanation: words.some(w => ['spiegami', 'spiega', 'cos\'è', 'cosa è', 'definizione', 'significato'].includes(w)),
                advice: words.some(w => ['consiglio', 'consigli', 'suggerimento', 'best practice', 'raccomandazione'].includes(w)),
                problem: words.some(w => ['problema', 'errore', 'bug', 'issue', 'non funziona', 'aiuto', 'help'].includes(w))
            };
            
            // Find relevant topics from comprehensive knowledge
            let relevantTopics = [];
            let bestMatch = null;
            let maxScore = 0;
            
            // Search through all categories
            for (const [category, topics] of Object.entries(comprehensiveKnowledge)) {
                if (category === 'examples') continue;
                
                for (const [topicName, topicData] of Object.entries(topics)) {
                    let score = 0;
                    
                    // Check direct topic name match
                    if (lowerMessage.includes(topicName)) score += 10;
                    
                    // Check keywords in definition
                    if (topicData.definition && lowerMessage.split(' ').some(word => 
                        topicData.definition.toLowerCase().includes(word) && word.length > 3)) {
                        score += 5;
                    }
                    
                    // Check other properties
                    for (const [key, value] of Object.entries(topicData)) {
                        if (Array.isArray(value)) {
                            value.forEach(item => {
                                if (lowerMessage.includes(item.toLowerCase())) score += 3;
                            });
                        } else if (typeof value === 'string') {
                            if (lowerMessage.includes(value.toLowerCase())) score += 2;
                        }
                    }
                    
                    if (score > maxScore) {
                        maxScore = score;
                        bestMatch = { category, topicName, topicData, score };
                    }
                    
                    if (score > 0) {
                        relevantTopics.push({ category, topicName, topicData, score });
                    }
                }
            }
            
            // Sort by relevance
            relevantTopics.sort((a, b) => b.score - a.score);
            
            // Generate response
            let response = "";
            
            // Dynamic introduction
            const intros = [
                "Ottima domanda! ",
                "Interessante che tu chieda questo. ",
                "Parliamo di questo argomento. ",
                "Ti spiego volentieri. ",
                "Ecco cosa posso dirti: ",
                "Questa è una domanda importante. ",
                "Perfetto, posso aiutarti con questo. ",
                "Analizziamo questo insieme. "
            ];
            
            if (bestMatch && bestMatch.score > 5) {
                response += intros[Math.floor(Math.random() * intros.length)];
                
                const topic = bestMatch.topicData;
                const topicName = bestMatch.topicName;
                const category = bestMatch.category;
                
                // Main explanation
                response += `\n\n**${topicName.charAt(0).toUpperCase() + topicName.slice(1)}** è ${topic.definition}.\n\n`;
                
                // Intent-based detailed response
                if (intents.example) {
                    // Show code example if available
                    const example = comprehensiveKnowledge.examples[topicName] || 
                                  comprehensiveKnowledge.examples[`${topicName} basics`];
                    if (example) {
                        response += "Ecco un esempio pratico:\n\n```\n" + example + "\n```\n\n";
                    }
                } else if (intents.list) {
                    // List relevant information
                    for (const [key, value] of Object.entries(topic)) {
                        if (Array.isArray(value) && key !== 'definition') {
                            response += `**${key.charAt(0).toUpperCase() + key.slice(1)}:**\n`;
                            value.forEach(item => response += `• ${item}\n`);
                            response += "\n";
                        }
                    }
                } else if (intents.howTo) {
                    // Provide step-by-step guidance
                    response += "Per iniziare, ecco i passaggi principali:\n\n";
                    if (topic.phases) {
                        topic.phases.forEach((phase, index) => {
                            response += `${index + 1}. ${phase}\n`;
                        });
                    } else if (topic.steps) {
                        topic.steps.forEach((step, index) => {
                            response += `${index + 1}. ${step}\n`;
                        });
                    } else {
                        response += "1. Comprendi i concetti base\n";
                        response += "2. Studia gli strumenti necessari\n";
                        response += "3. Pratica con esempi semplici\n";
                        response += "4. Implementa progetti reali\n";
                    }
                } else if (intents.comparison) {
                    // Show comparisons or alternatives
                    if (topic.types) {
                        response += "Tipologie principali:\n";
                        topic.types.forEach(type => response += `• ${type}\n`);
                    }
                    if (topic.alternatives) {
                        response += "\nAlternative:\n";
                        topic.alternatives.forEach(alt => response += `• ${alt}\n`);
                    }
                } else {
                    // General detailed information
                    let addedSections = 0;
                    for (const [key, value] of Object.entries(topic)) {
                        if (key === 'definition') continue;
                        if (Array.isArray(value) && value.length > 0 && addedSections < 3) {
                            response += `**${key.charAt(0).toUpperCase() + key.slice(1)}:**\n`;
                            value.slice(0, 5).forEach(item => response += `• ${item}\n`);
                            response += "\n";
                            addedSections++;
                        }
                    }
                }
                
                // Add relevant examples
                if (!intents.example && Object.keys(comprehensiveKnowledge.examples).some(key => 
                    key.includes(topicName) || topicName.includes(key))) {
                    response += "\n💡 Vuoi vedere un esempio di codice? Chiedimi: 'mostra esempio " + topicName + "'\n";
                }
                
            } else if (intents.problem) {
                // Problem-solving response
                response += "Capisco che hai un problema. ";
                response += "Anche se non ho identificato il problema specifico, posso aiutarti con:\n\n";
                response += "🔧 **Debugging**: Identificare la causa del problema\n";
                response += "📚 **Documentazione**: Consultare risorse appropriate\n";
                response += "🧪 **Testing**: Verificare soluzioni step-by-step\n";
                response += "🤝 **Support**: Guidarti verso la soluzione\n\n";
                response += "Puoi fornirmi più dettagli sul problema? Ad esempio:\n";
                response += "• Cosa stai cercando di fare?\n";
                response += "• Che errore ricevi?\n";
                response += "• In che contesto?\n";
                
            } else if (intents.advice) {
                // General advice response
                response += "Ecco alcuni consigli generali che possono esserti utili:\n\n";
                response += "✅ **Pianifica prima di agire**: Definisci obiettivi chiari\n";
                response += "📖 **Continua ad imparare**: Mantieniti aggiornato sulle novità\n";
                response += "🔄 **Pratica regolarmente**: L'esperienza è fondamentale\n";
                response += "🤝 **Collabora**: Lavora con altri e condividi conoscenze\n";
                response += "🧪 **Sperimenta**: Prova approcci diversi\n";
                response += "📊 **Misura i risultati**: Monitora i progressi\n\n";
                
            } else {
                // General conversational response
                response += "Ciao! Sono qui per aiutarti con qualsiasi domanda. ";
                response += "Posso assistere con:\n\n";
                response += "🤖 **AI & Machine Learning**: algoritmi, deep learning, MLOps\n";
                response += "💻 **Programmazione**: Python, JavaScript, web development\n";
                response += "📊 **Data Science**: statistiche, analisi dati, visualizzazione\n";
                response += "🏢 **Business**: project management, digital transformation\n";
                response += "🔬 **Scienza**: matematica, fisica, metodologie di ricerca\n";
                response += "🎨 **Creatività**: problem solving, innovazione, design thinking\n\n";
                response += "Cosa ti interesserebbe approfondire?";
            }
            
            // Add contextual follow-up suggestions
            const followUps = [
                "\n\nVuoi che approfondisca qualche aspetto specifico?",
                "\n\nHai domande su come applicare questo in pratica?",
                "\n\nTi interesserebbe vedere esempi concreti?",
                "\n\nCi sono altri argomenti correlati che vorresti esplorare?",
                "\n\nPosso spiegarti meglio qualche punto particolare?",
                "\n\nHai bisogno di chiarimenti su aspetti tecnici?",
                "\n\nVuoi sapere come iniziare concretamente?",
                "\n\nTi servirebbe una guida step-by-step?"
            ];
            
            if (Math.random() > 0.3 && bestMatch && bestMatch.score > 5) {
                response += followUps[Math.floor(Math.random() * followUps.length)];
            }
            
            return response;
        }

        // Conversation context tracking
        let conversationContext = [];
        let conversationHistory = [];
        
        // Enhanced greeting and farewell detection
        function detectGreeting(message) {
            const greetings = ['ciao', 'hello', 'salve', 'buongiorno', 'buonasera', 'hey', 'salut'];
            return greetings.some(greeting => message.toLowerCase().includes(greeting));
        }
        
        function detectFarewell(message) {
            const farewells = ['arrivederci', 'addio', 'bye', 'ciao', 'grazie', 'ci sentiamo', 'a presto'];
            return farewells.some(farewell => message.toLowerCase().includes(farewell));
        }
        
        // Enhanced chatbot functions
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add to conversation history
            conversationHistory.push({ role: 'user', content: message, timestamp: Date.now() });
            
            // Add user message
            addMessage(message, 'user');
            
            // Clear input
            input.value = '';
            
            // Show typing indicator with varied messages
            const typingMessages = [
                'Sto pensando...',
                'Elaborando la risposta...',
                'Analizzando la domanda...',
                'Un momento...',
                'Cerco le informazioni...'
            ];
            
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.innerHTML = '<span class="loading"></span> ' + 
                typingMessages[Math.floor(Math.random() * typingMessages.length)];
            typingDiv.id = 'typing-indicator';
            document.getElementById('chatMessages').appendChild(typingDiv);
            
            // Generate and send response
            setTimeout(() => {
                // Remove typing indicator
                const indicator = document.getElementById('typing-indicator');
                if (indicator) indicator.remove();
                
                // Generate contextual response
                let response;
                
                if (detectGreeting(message) && conversationHistory.length <= 2) {
                    response = generateGreetingResponse(message);
                } else if (detectFarewell(message)) {
                    response = generateFarewellResponse(message);
                } else {
                    response = generateDynamicResponse(message);
                }
                
                // Add to conversation history
                conversationHistory.push({ role: 'bot', content: response, timestamp: Date.now() });
                
                addMessage(response, 'bot');
            }, 800 + Math.random() * 1200); // Variable delay for realism
        }
        
        // Generate contextual greeting responses
        function generateGreetingResponse(message) {
            const greetingResponses = [
                "Ciao! Sono il tuo assistente AI personale. Come posso aiutarti oggi?",
                "Salve! Sono qui per rispondere alle tue domande su qualsiasi argomento. Cosa ti interessa?",
                "Ciao! Benvenuto! Posso aiutarti con programmazione, scienza, business, creatività e molto altro. Di cosa parliamo?",
                "Salve! Sono un assistente AI versatile. Puoi chiedermi qualsiasi cosa: da questioni tecniche a curiosità generali!",
                "Ciao! Pronto ad aiutarti con le tue domande. Hai qualcosa di specifico in mente o vuoi esplorare un argomento particolare?"
            ];
            
            return greetingResponses[Math.floor(Math.random() * greetingResponses.length)];
        }
        
        // Generate contextual farewell responses
        function generateFarewellResponse(message) {
            const farewellResponses = [
                "È stato un piacere aiutarti! Torna quando vuoi per altre domande. Buona giornata! 👋",
                "Arrivederci! Spero di essere stato utile. Sono sempre qui se hai altre domande! 😊",
                "Grazie per la conversazione! Non esitare a tornare se hai bisogno di aiuto. A presto! 🚀",
                "Ciao! È stato interessante parlare con te. Ricorda che sono sempre disponibile per nuove domande! ✨",
                "Salutami! Spero di aver risposto alle tue domande. Ci sentiamo presto! 🎯"
            ];
            
            return farewellResponses[Math.floor(Math.random() * farewellResponses.length)];
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            // Enhanced markdown-style formatting
            let formattedText = text
                // Code blocks with language detection
                .replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
                    const language = lang || 'code';
                    const langLabel = language.charAt(0).toUpperCase() + language.slice(1);
                    return `<div style="position: relative; background: #0a0a0a; border-radius: 8px; margin: 0.5rem 0; overflow: hidden;">
                        <div style="background: #667eea; color: white; padding: 0.3rem 0.8rem; font-size: 0.8rem; font-weight: 500;">${langLabel}</div>
                        <pre style="padding: 1rem; margin: 0; overflow-x: auto; color: #e5e5e5; font-family: 'Courier New', monospace;">${code}</pre>
                    </div>`;
                })
                // Simple code blocks
                .replace(/```\n([\s\S]*?)```/g, '<pre style="background: #0a0a0a; padding: 1rem; border-radius: 8px; margin: 0.5rem 0; overflow-x: auto; color: #e5e5e5; font-family: \'Courier New\', monospace;">$1</pre>')
                // Inline code
                .replace(/`([^`]+)`/g, '<code style="background: #2a2a2a; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: \'Courier New\', monospace; color: #e5e5e5;">$1</code>')
                // Bold text
                .replace(/\*\*(.*?)\*\*/g, '<strong style="color: #4ade80;">$1</strong>')
                // Italic text
                .replace(/\*(.*?)\*/g, '<em style="color: #f0f0f0;">$1</em>')
                // Links (basic detection)
                .replace(/https?:\/\/[^\s<>"]+/g, '<a href="$&" target="_blank" style="color: #667eea; text-decoration: underline;">$&</a>')
                // Lists
                .replace(/^• (.+)$/gm, '<div style="margin: 0.3rem 0; padding-left: 1rem; position: relative;"><span style="position: absolute; left: 0; color: #4ade80;">•</span>$1</div>')
                // Line breaks
                .replace(/\n/g, '<br>');
            
            messageDiv.innerHTML = formattedText;
            messagesContainer.appendChild(messageDiv);
            
            // Smooth scroll to bottom
            messagesContainer.scrollTo({
                top: messagesContainer.scrollHeight,
                behavior: 'smooth'
            });
            
            // Add slight delay for better UX
            setTimeout(() => {
                messageDiv.style.opacity = '0';
                messageDiv.style.transform = 'translateY(10px)';
                messageDiv.style.transition = 'opacity 0.3s, transform 0.3s';
                
                requestAnimationFrame(() => {
                    messageDiv.style.opacity = '1';
                    messageDiv.style.transform = 'translateY(0)';
                });
            }, 50);
        }

        // Quiz functions
        function loadQuiz() {
            const container = document.getElementById('quizContainer');
            if (currentQuestion < quizQuestions.length) {
                const q = quizQuestions[currentQuestion];
                container.innerHTML = `
                    <div class="quiz-question">
                        <strong>Domanda ${currentQuestion + 1}/${quizQuestions.length}:</strong><br>
                        ${q.question}
                    </div>
                    <div class="quiz-options">
                        ${q.options.map((option, index) => `
                            <div class="quiz-option" onclick="checkAnswer(${index})">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                showQuizResults();
            }
        }

        function checkAnswer(selected) {
            const correct = quizQuestions[currentQuestion].correct;
            const options = document.querySelectorAll('.quiz-option');
            
            options.forEach((option, index) => {
                option.style.pointerEvents = 'none';
                if (index === correct) {
                    option.classList.add('correct');
                } else if (index === selected && selected !== correct) {
                    option.classList.add('incorrect');
                }
            });
            
            if (selected === correct) {
                score++;
            }
            
            // Show explanation
            const container = document.getElementById('quizContainer');
            container.innerHTML += `
                <div style="margin-top: 1rem; padding: 1rem; background: #2a2a2a; border-radius: 8px; color: #ddd;">
                    <strong>Spiegazione:</strong> ${quizQuestions[currentQuestion].explanation}
                </div>
                <button style="margin-top: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-weight: 500;" onclick="nextQuestion()">
                    Prossima Domanda
                </button>
            `;
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuiz();
        }

        function showQuizResults() {
            const percentage = (score / quizQuestions.length) * 100;
            document.getElementById('quizScore').textContent = `${score}/${quizQuestions.length} (${percentage.toFixed(0)}%)`;
            
            let feedback = '';
            if (percentage >= 80) {
                feedback = 'Eccellente! Hai una solida comprensione del MLOps Testing.';
            } else if (percentage >= 60) {
                feedback = 'Buon lavoro! Ripassando alcune sezioni raggiungerai la padronanza completa.';
            } else {
                feedback = 'Continua a studiare! Ripassa i concetti e riprova il quiz.';
            }
            
            document.getElementById('quizFeedback').textContent = feedback;
            document.getElementById('quizResults').style.display = 'block';
            document.getElementById('quizContainer').innerHTML = `
                <button style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-weight: 500;" onclick="resetQuiz()">
                    Riprova Quiz
                </button>
            `;
        }

        function resetQuiz() {
            currentQuestion = 0;
            score = 0;
            document.getElementById('quizResults').style.display = 'none';
            loadQuiz();
        }

        // Make functions globally accessible
        window.checkAnswer = checkAnswer;
        window.nextQuestion = nextQuestion;
        window.resetQuiz = resetQuiz;

        // Save and load progress
        function saveProgress() {
            const progress = {
                visitedSections: Array.from(visitedSections),
                currentSection: currentSection,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('mlopsTestingProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('mlopsTestingProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                visitedSections = new Set(progress.visitedSections);
                updateProgress();
            }
        }

        // Clear chat function
        function clearChat() {
            const messagesContainer = document.getElementById('chatMessages');
            conversationHistory = [];
            conversationContext = [];
            
            // Keep only the initial bot message
            messagesContainer.innerHTML = `
                <div class="message bot">
                    Ciao! Sono il tuo assistente AI personale. Posso aiutarti con:
                    <br><br>
                    🤖 <strong>AI & Machine Learning</strong>: algoritmi, deep learning, MLOps
                    <br>💻 <strong>Programmazione</strong>: Python, JavaScript, web development
                    <br>📊 <strong>Data Science</strong>: statistiche, analisi dati, visualizzazione
                    <br>🏢 <strong>Business</strong>: project management, digital transformation
                    <br>🔬 <strong>Scienza</strong>: matematica, fisica, metodologie di ricerca
                    <br>🎨 <strong>Creatività</strong>: problem solving, innovazione, design thinking
                    <br><br>
                    Cosa vorresti approfondire? Puoi farmi qualsiasi domanda!
                </div>
            `;
        }
        
        // Initialize application
        function initializeApp() {
            // Load progress
            loadProgress();
            
            // Setup navigation event listeners
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    showSection(sectionId);
                });
            });
            
            // Setup chatbot event listeners
            const chatInput = document.getElementById('chatInput');
            const sendBtn = document.getElementById('sendBtn');
            const clearBtn = document.getElementById('clearBtn');
            
            sendBtn.addEventListener('click', sendMessage);
            
            if (clearBtn) {
                clearBtn.addEventListener('click', clearChat);
            }
            
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Add some helpful placeholder text rotation
            const placeholders = [
                "Fai una domanda...",
                "Cosa vuoi sapere?",
                "Chiedimi qualsiasi cosa...",
                "Come posso aiutarti?",
                "Hai una domanda per me?"
            ];
            
            let placeholderIndex = 0;
            setInterval(() => {
                if (chatInput.value === '') {
                    chatInput.placeholder = placeholders[placeholderIndex];
                    placeholderIndex = (placeholderIndex + 1) % placeholders.length;
                }
            }, 3000);
            
            // Initial progress update
            updateProgress();
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);

        // Save progress periodically
        setInterval(saveProgress, 30000);
    </script>
</body>
</html>